<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Namma UK – Explore Uttara Kannada</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/png" href="assets/icons/favicon.png">
  <meta name="description"
    content="Discover Uttara Kannada with Namma UK – your ultimate guide to beaches, waterfalls, trekking, and cultural heritage in Karnataka." />
  <meta name="keywords"
    content="Uttara Kannada tourism, Namma UK, Karnataka travel, Gokarna beach, Jog Falls, Murudeshwar temple, Dandeli adventure" />


  <meta property="og:title" content="Namma UK – Explore Uttara Kannada Tourism" />
  <meta property="og:description"
    content="Plan your trip to Uttara Kannada with Namma UK. Explore beaches, waterfalls, trekking spots, and cultural heritage." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://nammauk.vercel.app/" />
  <meta property="og:image" content="https://nammauk.vercel.app/assets/images/social-preview.jpg" />
  <meta property="og:site_name" content="Namma UK" />


  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Namma UK – Explore Uttara Kannada Tourism" />
  <meta name="twitter:description" content="Your ultimate guide to Uttara Kannada tourism." />
  <meta name="twitter:image" content="https://nammauk.vercel.app/assets/images/social-preview.jpg" />

  <meta name="robots" content="index, follow" />

  <!-- Theme Color (improves Lighthouse PWA score and mobile UI color) -->
  <meta name="theme-color" content="#FFD700" />

  <!-- Structured Data -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Namma UK",
  "url": "https://nammauk.vercel.app/",
  "description": "Discover Uttara Kannada with Namma UK – your ultimate guide to beaches, waterfalls, trekking, and cultural heritage in Karnataka.",
  "publisher": {
    "@type": "Organization",
    "name": "Namma UK",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nammauk.vercel.app/assets/icons/favicon.png"
    }
  }
}
</script>


</head>

<body class="bg-gray-50 text-slate-900">
  <header class="header">
    <div class="container nav">
      <img src="assets/icons/favicon.png" height="50px" width="50px">
      <a href="index.html" class="logo text-xl font-bold" data-aos="fade-right" data-i18n="app_title">Uttara Kannada</a>
      <div class="nav-links hidden md:flex" data-aos="fade-left">
        <a href="#featured" class="nav-link" data-i18n="nav_places">Places</a>
        <a href="taluks.html" class="nav-link" data-i18n="nav_taluks">Taluks</a>
        <a href="about.html" class="nav-link" data-i18n="nav_about">About</a>
        <div class="lang-select-wrapper ml-4">
          <select id="desktop-lang" onchange="setLanguage(this.value)" class="lang-dropdown">
            <option value="en">English</option>
            <option value="kn">ಕನ್ನಡ</option>
            <option value="hi">हिन्दी</option>
          </select>
        </div>
      </div>
      <button class="md:hidden text-2xl" id="hamburger" aria-label="menu"><i class="fa-solid fa-bars"></i></button>
    </div>
    </div>
    <div id="mobileMenu" class="mobile-menu md:hidden hidden">
      <div class="container p-4">
        <a href="taluks.html" class="block py-2" data-i18n="nav_taluks">All Taluks</a>
        <a href="about.html" class="block py-2" data-i18n="nav_about">About Uttara Kannada</a>
        <div class="mb-4">
          <select id="mobile-lang" onchange="setLanguage(this.value)" class="lang-dropdown w-15px">
            <option value="en">English</option>
            <option value="kn">ಕನ್ನಡ</option>
            <option value="hi">हिन्दी</option>
          </select>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-text" data-aos="fade-right">
          <h1 data-i18n="hero_title">Discover Uttara Kannada</h1>
          <p class="text-muted" data-i18n="hero_desc">Explore beaches, forests, waterfalls and heritage across the 12
            taluks of Uttara
            Kannada.</p>
          <div class="mt-4">
            <a href="taluks.html" class="btn"><span data-i18n="btn_explore">Explore</span> <i
                class="fa-solid fa-arrow-right ml-2"></i></a>
          </div>
        </div>
        <div class="hero-media" data-aos="fade-left" data-aos-delay="200">
          <div class="hero-slider" id="heroSlider" style="background:#eee; z-index:10; position:relative;">
            <img
              src="https://lh3.googleusercontent.com/gps-cs-s/AG0ilSzzYVk8GpTPrOwjTZ2thAwp54q_QHt1f0prvy2hGB8wBxyQV7XPgBWlhuOmoqJVdy0WvOkXysxJjDDmIGo55Y-HIfdy_BD7IBGj6HnW0VzmQ42aB1N4I5lTjwPqdD5XshnEdQrB=w540-h312-n-k-no"
              class="hero-slide active" alt="Om Beach">
            <img
              src="https://lh3.googleusercontent.com/gps-cs-s/AG0ilSxobv81ywe-L-zjJnQctfkUVTzEuWQfpmzL4Vn5HBl8gboJzBopIX5yAvUG_RJqRduPhd3jWONfmYsSSy_ZK-O_GIKPoFdE3dl9mS6VzvtRUdZkFq8iUaSAB7SIINNMo-4m3wIU=w540-h312-n-k-no"
              class="hero-slide" alt="Murudeshwar Temple">
            <img
              src="https://lh3.googleusercontent.com/gps-cs-s/AG0ilSzo33DY0ek7wkBE5HrWPWZFlyzUcQb3W40uWWzRcWx0kLAzJ0-vefAiv5naGJeJ2POrBCHlSpkBQ5TRlWPaIwlHeqaMdf49tWgu7UDfbTjJK1asmbc1qldlC7d4vT_9TLEndZA=w540-h312-n-k-no"
              class="hero-slide" alt="Yana Caves">
            <img
              src="https://lh3.googleusercontent.com/gps-cs-s/AG0ilSxAroxchlQ2ypBPdwdLrTmaE8i2nyU2MYZwktPT-ohg7QB5DCqGwvK8U6z11hDti3-rxQQ8TX-pgnaK8EUjN4llZmkn3mHoYg4KkXqYEnzTp43qTkS-gq1JpbJHwBL6EO_VSKk4=w540-h312-n-k-no"
              class="hero-slide" alt="Magod Falls">
            <img src="https://images.tv9kannada.com/wp-content/uploads/2024/01/sirsi-marikamba-devi-fair-2024.jpg"
              class="hero-slide" alt="Marikamba Temple">
            <img src="https://static.toiimg.com/img/93303613/Master.jpg" class="hero-slide" alt="Sahasra Linga">
            <img src="https://www.gosahin.com/go/p/f/1544295439_Banavasi-Temple1.jpg" class="hero-slide"
              alt="Banavasi Madhukeshwara Temple">
            <img src="https://www.karnataka.com/wp-content/uploads/2009/07/benne-hole-falls-sirsi.jpg"
              class="hero-slide" alt="Bennehole Falls">
            <img src="https://www.trawell.in/admin/images/upload/00122342Jenukallu_gudda_Sirsi.jpg" class="hero-slide"
              alt="Jenukallu Gudda">
            <img
              src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0e/86/f0/72/view-from-first-step.jpg?w=1200&h=1200&s=1"
              class="hero-slide" alt="Unchalli Falls">
            <img src="https://kalavadyfarmstay.com/wp-content/uploads/2023/02/img_20170501_070530_0031.jpg"
              class="hero-slide" alt="Mirjan Fort">
            <img
              src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/0d/ae/1b/20191101-163138-01-largejpg.jpg?w=1200&h=-1&s=1"
              class="hero-slide" alt="Yana Caves">
            <img src="https://honnavartourism.com/wp-content/uploads/2024/04/honnavar-tourism-4.jpg" class="hero-slide"
              alt="Sharavathi Backwaters">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/Murudeshwara_Temple%2CUttar_Karnataka.jpg"
              class="hero-slide" alt="Murudeshwar Temple">













          </div>
        </div>
      </div>
    </section>

    <section id="map-section" class="py-8 bg-white">
      <div class="container">
        <div class="listing-header" data-aos="fade-up">
          <h2 class="text-2xl font-bold">Explore via Map</h2>
          <div class="small text-muted">Click on pins to see details</div>
        </div>
        <div id="uk-map" class="w-full h-[400px] rounded-xl shadow-lg border border-gray-200" data-aos="zoom-in"
          data-aos-delay="200"></div>
      </div>
    </section>

    <section id="featured" class="py-8">
      <div class="container">
        <div class="listing-header" data-aos="fade-up">
          <h2 class="section-title" data-i18n="section_featured">Featured attractions</h2>
          <div class="small text-muted" data-i18n="section_subtitle">Handpicked popular spots</div>
        </div>
        <div class="filter-buttons" data-aos="fade-up" data-aos-delay="100">
          <button class="filter-btn active" data-filter="all" data-i18n="filter_all">All</button>
          <button class="filter-btn" data-filter="beach" data-i18n="filter_beach">Beaches</button>
          <button class="filter-btn" data-filter="temple" data-i18n="filter_temple">Temples</button>
          <button class="filter-btn" data-filter="waterfall" data-i18n="filter_waterfall">Waterfalls</button>
          <button class="filter-btn" data-filter="fort" data-i18n="filter_fort">Forts</button>
          <button class="filter-btn" data-filter="island" data-i18n="filter_island">Islands</button>
        </div>
        <div id="featured-grid" class="places-grid">
          <!-- dynamically populated -->
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small class="text-muted" data-i18n="footer_text">&copy; 2025 Uttara Kannada Tourism</small>
    </div>
  </footer>

  <script src="js/translations.js"></script>

  <script>
    // Mobile menu
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    hamburger.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      hamburger.classList.toggle('active');
    });

    // Initialize AOS
    AOS.init({
      duration: 800,
      once: true,
      offset: 100
    });

    // Hero Slider
    let currentSlide = 0;
    const slides = document.querySelectorAll('.hero-slide');
    const slideCount = slides.length;

    console.log('Hero Slider: Found', slideCount, 'slides');
    console.log('First slide classes:', slides[0]?.className);

    function nextSlide() {
      slides[currentSlide].classList.remove('active');
      currentSlide = (currentSlide + 1) % slideCount;
      slides[currentSlide].classList.add('active');
      console.log('Switched to slide', currentSlide);
    }

    if (slideCount > 0) {
      setInterval(nextSlide, 4000);
      console.log('Hero slider initialized with', slideCount, 'images');
    }

    // utility to resolve image string
    function resolveImage(img) {
      if (!img) return 'https://via.placeholder.com/600x400?text=No+Image';
      if (/^https?:\/\//i.test(img)) return img;
      return 'assets/images/' + img;
    }

    // Fetch data and render featured
    Promise.all([
      fetch('data/places.json?v=' + Date.now()).then(r => r.json()),
      fetch('data/images.json?v=' + Date.now()).then(r => r.json())
    ])
      .then(([placesData, imagesData]) => {
        // --- 1. Map Initialization ---
        // Uttara Kannada Bounds
        const southWest = L.latLng(13.7, 73.8);
        const northEast = L.latLng(15.5, 75.2);
        const bounds = L.latLngBounds(southWest, northEast);

        const map = L.map('uk-map', {
          center: [14.65, 74.55],
          zoom: 9,
          minZoom: 8,
          maxBounds: bounds,
          maxBoundsViscosity: 0.8,
          zoomControl: false // clearer view
        });

        // Custom pane for the mask to ensure it stays on top of tiles but below popups
        map.createPane('maskPane');
        map.getPane('maskPane').style.zIndex = 350;
        map.getPane('maskPane').style.pointerEvents = 'none'; // allow clicking through if needed, but we used holes

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 20,
          attribution: '© NammaUK'
        }).addTo(map);

        // Fetch precise boundary for masking
        fetch('data/uk_boundary.json')
          .then(res => res.json())
          .then(ukGeoJson => {
            const world = [
              [[90, -180], [90, 180], [-90, 180], [-90, -180]]
            ];
            // Extract hole coordinates from MultiPolygon
            // Leaflet polygon requires [lat, lng], GeoJSON is [lng, lat]
            // We need to invert valid polygons from the geometry
            const coords = ukGeoJson.geometry.coordinates;

            // Handle MultiPolygon: It's an array of Polygons, where each Polygon is an array of Rings (1st is outer)
            // We need to add the outer ring of each polygon as a "hole" to our mask
            coords.forEach(polygon => {
              const outerRing = polygon[0]; // First ring is outer boundary
              const hole = outerRing.map(p => [p[1], p[0]]); // Swap lng,lat to lat,lng
              world.push(hole);
            });

            L.polygon(world, {
              color: 'transparent',
              fillColor: 'white',
              fillOpacity: .5, // Solid white mask
              pane: 'maskPane'
            }).addTo(map);

            // Also add a border to the district to make it pop
            L.geoJSON(ukGeoJson, {
              style: { color: '#0ea5a4', weight: 2, fill: false }
            }).addTo(map);
          })
          .catch(e => console.error("Boundary load failed", e));

        L.control.zoom({ position: 'topright' }).addTo(map);

        // Build a map of "Place Name" -> "Image URL" from imagesData
        const imageMap = {};
        Object.keys(imagesData).forEach(taluk => {
          const places = imagesData[taluk] || [];
          places.forEach(p => {
            if (p.name && p.image) {
              imageMap[p.name.toLowerCase()] = p.image;
            }
          });
        });

        // collect first N places across taluks AND add markers
        const places = [];
        Object.keys(placesData).forEach(k => {
          const arr = placesData[k] || [];
          arr.forEach(p => {
            const fullP = Object.assign({ taluk: k }, p);
            places.push(fullP);

            // Add Marker
            if (p.lat && p.lng) {
              const m = L.marker([p.lat, p.lng]).addTo(map);
              // Resolve image for popup
              let popupImg = imageMap[p.name.toLowerCase()];
              if (!popupImg) popupImg = resolveImage(p.image);

              m.bindPopup(`
                    <div style="width:200px">
                        <img src="${popupImg}" style="width:100%;height:100px;object-fit:cover;border-radius:6px;margin-bottom:6px"/>
                        <h3 style="font-weight:bold;font-size:14px;margin:0">${p.name}</h3>
                        <p style="margin:4px 0;font-size:12px;color:#666">${p.type} • ${k}</p>
                        <a href="${k.toLowerCase()}.html" style="font-size:12px;color:#0ea5a4;text-decoration:none">View Details</a>
                    </div>
                 `);
            }
          });
        });
        // Prioritize Sirsi places for featured section
        const featuredIds = ['marikamba_temple', 'sahasralinga', 'murudeshwar_temple', 'gokarna_beach', 'apsarakonda_falls', 'yana_caves', 'magod_falls', 'dandeli_wildlife_sanctuary', 'mirjan_fort'];
        const featured = [];

        // Add specific priority places first
        featuredIds.forEach(id => {
          const p = places.find(place => place.id === id);
          if (p) featured.push(p);
        });

        // Fill remaining slots if any (though we defined 9)
        if (featured.length < 9) {
          places.forEach(p => {
            if (featured.length < 9 && !featured.includes(p)) {
              featured.push(p);
            }
          });
        }
        const grid = document.getElementById('featured-grid');

        // Store all places for filtering
        let allPlaces = places;
        let currentFilter = 'all';

        function renderPlaces(placesToRender) {
          grid.innerHTML = '';
          const lang = window.currentLanguage || localStorage.getItem('uk_lang') || 'en';

          placesToRender.forEach((p, index) => {
            const div = document.createElement('div');
            div.className = 'place-card card-hover';
            div.setAttribute('data-aos', 'fade-up');
            div.setAttribute('data-aos-delay', (index % 3) * 100); // Stagger animation

            // Dynamic Translation Lookup
            let pName = p.name;
            let pDesc = p.description || '';

            if (lang !== 'en') {
              if (lang === 'kn' && p.name_kn) pName = p.name_kn;
              else if (lang === 'hi' && p.name_hi) pName = p.name_hi;

              if (lang === 'kn' && p.description_kn) pDesc = p.description_kn;
              else if (lang === 'hi' && p.description_hi) pDesc = p.description_hi;
            }

            // Try to find image in map by name, fallback to p.image if it looks like a URL, else placeholder
            let imgSrc = imageMap[p.name.toLowerCase()];
            if (!imgSrc) {
              imgSrc = resolveImage(p.image);
            }

            // Translated buttons
            const btnMap = translations[lang] && translations[lang]['btn_view_map'] ? translations[lang]['btn_view_map'] : 'View on map';
            const btnSee = translations[lang] && translations[lang]['btn_see_more'] ? translations[lang]['btn_see_more'] : 'See more in';

            // Translate Taluk Name
            let talukName = p.taluk;
            const talukKey = 'taluk_' + p.taluk.toLowerCase();
            if (translations[lang] && translations[lang][talukKey]) {
              talukName = translations[lang][talukKey];
            }

            div.innerHTML = `
            <img src="${imgSrc}" alt="${pName}" />
            <div class="place-meta">
              <h3>${pName}</h3>
              <div class="meta-line">${talukName} • ${p.type || ''}</div>
              <p class="card-desc">${pDesc}</p>
              <div class="place-actions">
                <a class="btn" href="${(p.maps_url || p.mapLink || p.mapUrl || p.mapsUrl || 'https://maps.google.com')}" target="_blank">${btnMap}</a>
                <a class="btn" href="${p.taluk.toLowerCase()}.html">${btnSee} ${talukName}</a>
              </div>
            </div>
          `;
            grid.appendChild(div);
          });

          // Refresh AOS to detect new elements
          AOS.refresh();
        }

        // Listen for language changes
        window.addEventListener('languageChanged', (e) => {
          renderPlaces(currentFilter === 'all' ? allPlaces : allPlaces.filter(p => {
            const type = (p.type || '').toLowerCase();
            return type.includes(currentFilter);
          }));
        });

        // Listen for language changes to re-render grid
        window.addEventListener('languageChanged', () => {
          const activeBtn = document.querySelector('.filter-btn.active');
          if (activeBtn) activeBtn.click();
        });

        // Initial renderS
        renderPlaces(featured);

        // Filter button logic
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(btn => {
          btn.addEventListener('click', () => {
            const filter = btn.dataset.filter;
            currentFilter = filter;

            // Update active state
            filterButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Filter places
            let filtered;
            if (filter === 'all') {
              filtered = allPlaces.slice(0, 9);
            } else {
              filtered = allPlaces.filter(p => {
                const type = (p.type || '').toLowerCase();
                return type.includes(filter);
              }).slice(0, 9);
            }

            renderPlaces(filtered);
          });
        });
      })
      .catch(e => console.error('Failed to load data', e));
  </script>
  <script src="js/dev.js"></script>


  
</body>

</html>